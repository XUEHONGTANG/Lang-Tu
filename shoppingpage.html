<!DOCTYPE html>
<html lang="en">
  <head>
    @@include('./layout/head.html', { "title" : "浪浪商店" })
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.2.0/css/all.min.css"
    />
    <script src="https://unpkg.com/vue@2"></script>
    <!-- <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.1/jquery.min.js"></script> -->
  </head>

  <body>
    @@include('./layout/header_1.html',{ "大標題" : "浪浪商店" , "英文標題" :
    "LANG LANG WAITS FOR HOME" , "前頁面" : "首頁" , "此頁面" : "浪浪商店" , })
    <main>
      <div class="shoppingPageWrapper">
        <!-- sidebar -->
        <div class="sidebar" id="sidebarApp">
          <h3>商品類別</h3>
          <ul>
            <li>
              <button class="accordion" @click="toggle(0)">汪汪選物</button>
              <ol :class="olClass">
                <li><button>汪汪罐頭</button></li>
                <li><button>汪汪飼料</button></li>
              </ol>
            </li>
            <li>
              <button class="accordion" @click="toggle(1)">喵喵選物</button>
              <ol :class="olClass">
                <li><button>喵喵罐頭</button></li>
                <li><button>喵喵飼料</button></li>
              </ol>
            </li>
            <li>
              <button>浪浪周邊</button>
            </li>
          </ul>
        </div>
      </div>

      <!-- sidebar -->
    </main>
    @@include('layout/footer.html')

    <script>
        //   codepen參考: https://codepen.io/abdon-gahungu/pen/eYdxVmz?editors=1000

          new Vue({
              el: '#sidebarApp',
              data:{
                  isOpen: false,
                  reactArr:[],
                  olClass: 'hide',
              },
              mounted() {
                let reactTotal = document.querySelectorAll('.hide')
                // console.log(reactTotal);
                reactTotal.forEach((item) => {
                  this.reactArr.push(item)
                  console.log(this.reactArr);
                });
              },
              methods:{
                toggle(order) {
                      let length = this.reactArr.length,
                      i = 0;
                      // console.log(length);
                      // console.log(this.reactArr[order]);

                      if (this.isOpen === false) {
                          // console.log(this.reactArr[order]);
                          this.reactArr[order].classList.remove('hide');
                          this.reactArr[order].classList.add('show');
                          // console.log(this.reactArr[order].previousElementSibling);
                          this.reactArr[order].previousElementSibling.classList.add('turnRight');

                          this.isOpen = true;
                          for (i; i < length; i++) {
                              if (order != i) {
                          this.reactArr[i].classList.remove('show');
                          this.reactArr[i].classList.add('hide');
                          this.reactArr[i].previousElementSibling.classList.remove('turnRight');


                                  // this.reactArr[i].class = 'hide';
                                  // this.reactArr[i].chevron = 'fa fa-chevron-down';
                              }
                          }
                      }else if(this.isOpen === true && this.reactArr[order].classList.contains('hide') ){
                        this.reactArr[order].classList.remove('hide');
                        this.reactArr[order].classList.add('show');
                        this.reactArr[order].previousElementSibling.classList.add('turnRight');
                          
                          for (i; i < length; i++) {
                              if (order != i) {
                          this.reactArr[i].classList.remove('show');
                          this.reactArr[i].classList.add('hide');
                          this.reactArr[i].previousElementSibling.classList.remove('turnRight');

                              }
                            }
                      } else {
                          this.reactArr[order].classList.remove('show');
                          this.reactArr[order].classList.add('hide'); this.reactArr[order].previousElementSibling.classList.remove('turnRight');
                          
                          // this.reactArr[order].class = 'hide';
                          // this.reactArr[order].chevron = 'fa fa-chevron-down';
                          this.isOpen = false;
                      }
                  },
              },
              // computed:{
              //   num(index){
              //     let length = this.reactArr.length, i = 0, arr = [];
              //     for(i;i < length; i++){
              //       arr.push(i)
              //     }
              //     index = arr[i]
              //   },
              // },
          });
    </script>
  </body>
</html>
