<!DOCTYPE html>
<html lang="en">
<head>
    @@include('./layout/head.html', {
        "title" : "後台管理登入"
    })
</head>
<body>
    @@include('./layout/bak-head.html')

    <div class="login">
        <div class="bak_head">
            <h1>浪途後台管理</h1>
        </div>

        <div class="acc_pass">
            <form method="post" action="./php/baklogin.php">
                <div class="log">
                    <label class="text-label-1 tl" for=""><br>
                        <input class="input-text" type="text" id="username" name="username" placeholder="請輸入管理員帳號">
                    </label>
        
                    <label class="text-label-2 tl"><br>
                        <input class="input-text" type="password" id="password" name="password" placeholder="請輸入管理員密碼">
                    </label>
                </div>
    
                <div class="btn">
                    <input type="submit" value="登入" class="btn-0"> 
                </div>
            </form>
        </div>


    </div>

    <script>
        const username = document.querySelector('#username');
        const password = document.querySelector('#password');
        document.querySelector('.btn-0').addEventListener('click', () => {
            if(!username || !password){
                alert('請輸入USERNAME、PASSWORD!');
                return;
            }

        fetch('./php/baklogin.php', {
            method: 'POST',
            headers: { 'Content-Type':'application/json' },
            body: JSON.stringify({
                username: username.value,
                password: password.value
            })
        })
            .then(resp => resp.json())
            .then(body => {
                if (body.successful){
                    location = './bak_member.html';
                }else{
                    alert(body.message);
                }
            });

        });
    </script>
</body>
</html>